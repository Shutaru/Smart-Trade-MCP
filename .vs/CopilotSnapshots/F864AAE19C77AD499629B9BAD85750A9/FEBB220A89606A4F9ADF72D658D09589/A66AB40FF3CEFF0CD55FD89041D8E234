# -*- coding: utf-8 -*-
"""Quick test to verify logging is COMPLETELY silent"""

import sys
import os

# Fix encoding
if sys.platform == 'win32':
    os.environ['PYTHONIOENCODING'] = 'utf-8'
    try:
        if hasattr(sys.stdout, 'reconfigure'):
            sys.stdout.reconfigure(encoding='utf-8')
        if hasattr(sys.stderr, 'reconfigure'):
            sys.stderr.reconfigure(encoding='utf-8')
    except:
        pass

# CRITICAL: Set env var BEFORE any imports!
os.environ['SMART_TRADE_DISABLE_LOGGING'] = 'true'

# Disable ALL logging BEFORE imports
import logging
logging.disable(logging.CRITICAL)
logging.basicConfig(level=logging.CRITICAL + 100)

from loguru import logger as loguru_logger
loguru_logger.remove()

# Now import project modules
sys.path.insert(0, os.path.dirname(__file__))

print("Importing modules...")
from src.core.logger import logger
from src.core.backtest_engine import BacktestEngine
from src.strategies import registry

print("\n" + "="*80)
print("TESTING LOGGING - You should see ZERO logs below!")
print("="*80 + "\n")

# Try to log (should be silent)
logger.info("This INFO should NOT appear")
logger.warning("This WARNING should NOT appear")
logger.error("This ERROR should NOT appear")

print("\n" + "="*80)
print("If you see NO logs above, SUCCESS! ✅")
print("If you see ANY logs above, FAILED! ❌")
print("="*80)
